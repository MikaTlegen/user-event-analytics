-- Очистка таблиц (с учетом зависимостей)
TRUNCATE TABLE user_events_entity RESTART IDENTITY CASCADE;
TRUNCATE TABLE user_profile RESTART IDENTITY CASCADE;
TRUNCATE TABLE users RESTART IDENTITY CASCADE;

-- Сброс последовательностей (исправленные имена)
ALTER SEQUENCE IF EXISTS users_id_seq RESTART WITH 1;
ALTER SEQUENCE IF EXISTS user_profile_id_seq RESTART WITH 1;
ALTER SEQUENCE IF EXISTS user_events_entity_id_seq RESTART WITH 1;

-- Заполнение таблицы users (с использованием enum значений)
INSERT INTO users (name, email, role) VALUES
                                          ('Александр Иванов', 'alex.ivanov@email.com', 'USER_ROLE'),
                                          ('Елена Петрова', 'elena.petrova@email.com', 'ADMIN_ROLE'),
                                          ('Дмитрий Сидоров', 'dmitry.sidorov@email.com', 'USER_ROLE'),
                                          ('Мария Козлова', 'maria.kozlova@email.com', 'USER_ROLE'),
                                          ('Сергей Михайлов', 'sergey.mikhailov@email.com', 'USER_ROLE'),
                                          ('Анна Новикова', 'anna.novikova@email.com', 'ADMIN_ROLE'),
                                          ('Павел Морозов', 'pavel.morozov@email.com', 'USER_ROLE'),
                                          ('Ольга Волкова', 'olga.volkova@email.com', 'USER_ROLE'),
                                          ('Николай Соколов', 'nikolay.sokolov@email.com', 'USER_ROLE'),
                                          ('Татьяна Кузнецова', 'tatiana.kuznetsova@email.com', 'ADMIN_ROLE');

-- Заполнение таблицы user_profile
INSERT INTO user_profile (first_name, last_name, user_id, created_at) VALUES
                                                                          ('Александр', 'Иванов', 1, '2024-01-15 10:30:00'),
                                                                          ('Елена', 'Петрова', 2, '2024-01-16 14:45:00'),
                                                                          ('Дмитрий', 'Сидоров', 3, '2024-01-17 09:20:00'),
                                                                          ('Мария', 'Козлова', 4, '2024-01-18 16:10:00'),
                                                                          ('Сергей', 'Михайлов', 5, '2024-01-19 11:55:00'),
                                                                          ('Анна', 'Новикова', 6, '2024-01-20 13:25:00'),
                                                                          ('Павел', 'Морозов', 7, '2024-01-21 08:15:00'),
                                                                          ('Ольга', 'Волкова', 8, '2024-01-22 17:40:00'),
                                                                          ('Николай', 'Соколов', 9, '2024-01-23 12:05:00'),
                                                                          ('Татьяна', 'Кузнецова', 10, '2024-01-24 15:50:00');

-- Заполнение таблицы user_events_entity (с использованием enum значений EventType)
INSERT INTO user_events_entity (user_id, event_type, event_data, details) VALUES
-- События для пользователя 1 (Александр)
(1, 'LOGIN', '2024-01-15 10:30:05', 'Вход в систему с IP 192.168.1.1'),
(1, 'PAGE_VIEW', '2024-01-15 10:35:12', 'Просмотр главной страницы'),
(1, 'PRODUCT_VIEW', '2024-01-15 10:40:23', 'Просмотр товара "Ноутбук Asus"'),
(1, 'SEARCH', '2024-01-15 10:45:30', 'Поиск по запросу "игровой ноутбук"'),
(1, 'LOGOUT', '2024-01-15 11:45:30', 'Выход из системы'),

-- События для пользователя 2 (Елена - админ)
(2, 'LOGIN', '2024-01-16 09:15:00', 'Вход в систему с IP 192.168.1.100'),
(2, 'PAGE_VIEW', '2024-01-16 09:20:15', 'Просмотр панели администратора'),
(2, 'SEARCH', '2024-01-16 09:45:30', 'Поиск пользователей по фильтру'),
(2, 'PRODUCT_VIEW', '2024-01-16 10:05:45', 'Просмотр товара "Смартфон iPhone"'),
(2, 'LOGOUT', '2024-01-16 11:30:00', 'Выход из системы'),

-- События для пользователя 3 (Дмитрий)
(3, 'LOGIN', '2024-01-17 08:45:20', 'Вход в систему с IP 192.168.1.15'),
(3, 'SEARCH', '2024-01-17 08:50:10', 'Поиск по ключевому слову "отчет"'),
(3, 'PAGE_VIEW', '2024-01-17 09:00:00', 'Просмотр страницы с отчетами'),
(3, 'PRODUCT_VIEW', '2024-01-17 09:15:35', 'Просмотр товара "Монитор Samsung"'),

-- События для пользователя 4 (Мария)
(4, 'LOGIN', '2024-01-18 14:20:00', 'Вход в систему с IP 192.168.1.20'),
(4, 'PAGE_VIEW', '2024-01-18 14:25:30', 'Просмотр профиля'),
(4, 'SEARCH', '2024-01-18 14:30:45', 'Поиск товаров по категории'),
(4, 'PRODUCT_VIEW', '2024-01-18 14:35:45', 'Просмотр товара "Клавиатура Logitech"'),
(4, 'LOGOUT', '2024-01-18 15:50:15', 'Выход из системы'),

-- События для пользователя 5 (Сергей)
(5, 'LOGIN', '2024-01-19 11:10:00', 'Вход в систему с IP 192.168.1.25'),
(5, 'PAGE_VIEW', '2024-01-19 11:20:40', 'Просмотр ежемесячного отчета'),
(5, 'PRODUCT_VIEW', '2024-01-19 11:30:15', 'Просмотр товара "Мышь беспроводная"'),
(5, 'SEARCH', '2024-01-19 11:45:20', 'Поиск по аксессуарам'),

-- События для пользователя 6 (Анна - админ)
(6, 'LOGIN', '2024-01-20 10:30:00', 'Вход в систему с IP 192.168.1.200'),
(6, 'PAGE_VIEW', '2024-01-20 10:45:15', 'Просмотр управления пользователями'),
(6, 'SEARCH', '2024-01-20 10:55:30', 'Поиск логов системы'),
(6, 'PRODUCT_VIEW', '2024-01-20 11:15:30', 'Просмотр товара "Планшет iPad"'),
(6, 'LOGOUT', '2024-01-20 12:00:00', 'Выход из системы'),

-- События для пользователя 7 (Павел)
(7, 'LOGIN', '2024-01-21 07:30:00', 'Вход в систему с IP 192.168.1.30'),
(7, 'PAGE_VIEW', '2024-01-21 07:45:20', 'Просмотр страницы создания заказа'),
(7, 'PRODUCT_VIEW', '2024-01-21 08:00:00', 'Просмотр товара "Наушники Sony"'),
(7, 'SEARCH', '2024-01-21 08:15:40', 'Поиск по электронике'),
(7, 'PRODUCT_VIEW', '2024-01-21 08:30:10', 'Просмотр товара "Внешний диск"'),

-- События для пользователя 8 (Ольга)
(8, 'LOGIN', '2024-01-22 16:20:00', 'Вход в систему с IP 192.168.1.35'),
(8, 'PAGE_VIEW', '2024-01-22 16:35:25', 'Просмотр страницы загрузок'),
(8, 'PRODUCT_VIEW', '2024-01-22 16:40:30', 'Просмотр товара "Принтер HP"'),
(8, 'SEARCH', '2024-01-22 16:50:45', 'Поиск по оргтехнике'),

-- События для пользователя 9 (Николай)
(9, 'LOGIN', '2024-01-23 09:45:00', 'Вход в систему с IP 192.168.1.40'),
(9, 'PAGE_VIEW', '2024-01-23 09:55:30', 'Просмотр настроек аккаунта'),
(9, 'SEARCH', '2024-01-23 10:00:15', 'Поиск истории заказов'),
(9, 'PRODUCT_VIEW', '2024-01-23 10:05:15', 'Просмотр товара "Кофеварка"'),

-- События для пользователя 10 (Татьяна - админ)
(10, 'LOGIN', '2024-01-24 08:00:00', 'Вход в систему с IP 192.168.1.250'),
(10, 'PAGE_VIEW', '2024-01-24 08:30:20', 'Просмотр системных настроек'),
(10, 'SEARCH', '2024-01-24 09:00:45', 'Поиск по системным логам'),
(10, 'PRODUCT_VIEW', '2024-01-24 09:15:45', 'Просмотр товара "Сервер Dell"'),
(10, 'LOGOUT', '2024-01-24 10:45:00', 'Выход из системы'),

-- Дополнительные события для разных пользователей
(1, 'LOGIN', '2024-01-25 09:30:00', 'Вход в систему с IP 192.168.1.1'),
(1, 'PAGE_VIEW', '2024-01-25 09:35:00', 'Просмотр страницы аккаунта'),
(2, 'LOGIN', '2024-01-25 10:00:00', 'Вход в систему с IP 192.168.1.100'),
(3, 'LOGIN', '2024-01-25 11:15:00', 'Вход в систему с IP 192.168.1.15'),
(3, 'PRODUCT_VIEW', '2024-01-25 11:30:00', 'Просмотр товара "Видеокарта"'),
(4, 'PAGE_VIEW', '2024-01-25 14:20:00', 'Просмотр страницы контактов'),
(5, 'SEARCH', '2024-01-25 15:30:00', 'Поиск по ключевому слову "скидки"');